<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhangbin.dao.TeacherMapper">
        <!--   æ–¹å¼ä¸?   -->
        <!--ä¸?å¯¹å¤šæŸ¥è¯¢  -->
        <select id="getTeacher" resultMap="teacherMap">
            select t.name tname,t.id tid,s.id sid,s.name sname  from teacher t, student s where t.id = s.tid and t.id = #{tid};
        </select>

        <!--idå¯¹åº”resultMapä¸­çš„å®šä¹‰å€? è¿”å›žå€¼ç±»åž‹ä¸ºTeacher-->
        <resultMap id="teacherMap" type="Teacher">
            <result property="name" column="tname"></result>
            <result property="id" column="tid"></result>

            <!--ä¸?å¯¹å¤šéœ?è¦éåŽ†æ•°æ®ï¼Œæ‰?ä»¥ä½¿ç”¨çš„æ˜¯collectionæ ‡ç­¾ ofTypeæ ‡ç­¾æ›¿ä»£å¤šå¯¹ä¸?ä¸­çš„javaTypeæ ‡ç­¾ï¼Œå¯ä»¥å¾ªçŽ¯æ•°æ?-->
            <!--æ³¨æ„ç‚¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼šä¸€å¯¹å¤šæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æ˜¯å¤šæ¡ï¼Œæ‰€ä»¥propertyå±žæ?§å?¼åŽè¾¹éœ€è¦åŠ Sï¼Œå®žä½“ç±»éœ?è¦æ˜¯å¤æ•°-->
            <collection property="students" ofType="Student" >
                <result property="id" column="sid"></result>
                <result property="name" column="sname"></result>
                <result property="tid" column="tid"></result>
            </collection>
        </resultMap>


        <!--   æ–¹å¼äº?   -->
        <!--ä¸?:å…ˆæŸ¥è¯¢å‡ºæ‰?æœ‰çš„è€å¸ˆæ•°æ®-->
        <select id="getTeacher2" resultMap="teacherMap2">
            select * from teacher where id = #{tid}
        </select>
        <!--äº?:ä½¿ç”¨resultMapæ ‡ç­¾å…³è”å¦ä¸€ä¸ªSQLè¿›è¡Œå­æŸ¥è¯?-->
        <resultMap id="teacherMap2" type="Teacher">
            <!--propertyæŒ‡çš„æ˜¯å­æŸ¥è¯¢çš„ç»“æžœé›†,columnæŒ‡çš„æ˜¯å­æŸ¥è¯¢éœ?è¦çš„æŸ¥è¯¢æ¡ä»¶ï¼ŒofTypeæŒ‡çš„æ˜¯æŸ¥è¯¢æ•°æ®çš„å®žä½“ç±?-->
            <collection property="students" column="id" ofType="Student" select="getStudent">
            </collection>
        </resultMap>
        <select id="getStudent" resultType="Student">
            select * from student where tid = #{id}
        </select>
</mapper>